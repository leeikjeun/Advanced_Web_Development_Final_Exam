function onloadFunction(e){if(0!=localStorage.length){var t=localStorage.getItem(control.storageKey);model.view.setVal(t.substring(1,t.length-1))}}var control={storageKey:"memoText"},model={};!function(e){e.util={storage:{load:function(){return console.log("storage.load()"),JSON.parse(localStorage.getItem(e.storageKey)||"[]")},save:function(t,n){console.log("storage.save()"),localStorage.setItem(e.storageKey,JSON.stringify(n))}},requirements:{fullScreen:function(e){screenfull.enabled&&screenfull.request()},newNote:function(e){model.view.setVal("")},saveNote:function(t){e.util.storage.save(t,model.view.getVal()),alert("저장완료")},noteDownload:function(e){var t=new Blob([model.view.getVal()],{type:"text/plain;charset=utf-8"});saveAs(t,"memo.txt")},showAboutApplication:function(t){model.view.show(),e.util.requirements.animateValue(3,0,3e3),setTimeout(model.view.close,3e3)},close:function(e){model.view.close()},animateValue:function(e,t,n){var o=t-e,r=e,a=t>e?1:-1,l=Math.abs(Math.floor(n/o)),i=document.getElementById("count"),c=setInterval(function(){r+=a,i.innerHTML=r,r==t&&clearInterval(c)},l)}}}}(control),function(e){e.view={memo:document.getElementById("memo"),modal:document.querySelector(".modal"),setVal:function(t){e.view.memo.value=t},getVal:function(){return e.view.memo.value},close:function(){e.view.modal.style.height="0"},show:function(){e.view.modal.style.height="300px"}}}(model);var saveAs=saveAs||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in n,r=/constructor/i.test(e.HTMLElement)||e.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},i=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},u=function(u,s,d){d||(u=c(u));var f,m=this,v="application/octet-stream"===u.type,w=function(){!function(e,t,n){for(var o=(t=[].concat(t)).length;o--;){var r=e["on"+t[o]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){l(e)}}}(m,"writestart progress write writeend".split(" "))};if(m.readyState=m.INIT,o)return f=t().createObjectURL(u),void setTimeout(function(){n.href=f,n.download=s,function(e){var t=new MouseEvent("click");e.dispatchEvent(t)}(n),w(),i(f),m.readyState=m.DONE});!function(){if((a||v&&r)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=a?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,m.readyState=m.DONE,w()},n.readAsDataURL(u),void(m.readyState=m.INIT)}f||(f=t().createObjectURL(u)),v?e.location.href=f:e.open(f,"_blank")||(e.location.href=f);m.readyState=m.DONE,w(),i(f)}()},s=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(s.abort=function(){},s.readyState=s.INIT=0,s.WRITING=1,s.DONE=2,s.error=s.onwritestart=s.onprogress=s.onwrite=s.onabort=s.onerror=s.onwriteend=null,function(e,t,n){return new u(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),console.log("my-note app.js");try{var isFileSaverSupported=!!new Blob}catch(e){console.log("don't run")}var clickBts={newNoteBtn:document.querySelector(".btn-newnote"),saveNoteBtn:document.querySelector(".btn-savenote"),noteDownloadBtn:document.querySelector(".btn-notedownload"),aboutBtn:document.querySelector(".btn-about"),fullScreenBtn:document.querySelector(".btn-fullscreen")};clickBts.newNoteBtn.addEventListener("click",control.util.requirements.newNote,!1),clickBts.saveNoteBtn.addEventListener("click",control.util.requirements.saveNote,!1),clickBts.aboutBtn.addEventListener("click",control.util.requirements.showAboutApplication,!1),clickBts.fullScreenBtn.addEventListener("click",control.util.requirements.fullScreen,!1),clickBts.noteDownloadBtn.addEventListener("click",control.util.requirements.noteDownload,!1),model.view.modal.addEventListener("click",control.util.requirements.close,!1),window.onload=onloadFunction;